### 프로토타입

> ch.20 프로토타입을 읽고 요약한 내용입니다.

객체지향 프로그래밍에서는 독립적인 객체의 집합으로 프로그램을 구성한다.
상속은 객체지향에서 프로퍼티 또는 메서드를 다른 객체가 그대로 사용할 수 있는 것.
JavaScript 는 prototype 을 이용해서 상속을 구현한다.

모든 객체는 __proto__ 접근자 프로퍼티를 통해서 프로토타입 객체에 접근이 가능하다.
이 __proto__ 프로퍼티는 getter setter 로 구성된 속성이다.
이는 임의로 무한 루프를 생성하는 프로토타입 체인을 변경 작업을 방지하기 위한 설계이다.

Prototype 객체는 함수 정의가 평가되어 함수 객체를 생성하는 시점에 함께 생성된다.

객체는 다양한 방식으로 생성이 가능한데, 이들은 모두 OrdinaryObjectCreate 라는 추상 연산에 의해 생성된다는 공통점이 있다.

new 연산자로 생성자 함수를 호출하여 인스턴스를 생성하면 프로토타입은 생성자 함수의 prototype 프로퍼티에 바인딩 되어있는 객체를 활용한다.

JavaScript 에서는 객체의 프로퍼티에 접근하고자 할 때 만약 접근하고자하는 프로퍼티가 없다면 부모 프로토타입을 순차적으로 방문하면서 (체인) 검색한다. 이를 프로토타입 체이닝이라고 한다.

스코프체인은 식별자를 찾기 위한 여정으로 프로토타입 체인과 함께 서로 협력하여 식별자와 프로퍼티를 찾는데 활용된다.

프로토타입 프로퍼티와 같은 이름의 프로퍼티를 인스턴스에 추가하면 인스턴스 프로퍼티로 추가되어 가려지게(shadow) 된다.
이는 객체지향에서 오버라이딩의 개념과 같다.

연산자 instanceof 는 특정 생성자 함수의 프로토타입 이 피연산자 프로토타입 체인상에 존재하는지 확인하는 기능을 수행한다.

프로토타입 체인의 종점에 있는 객체 (Object.create(null))는 Object.prototype 의 빌트인 메서드를 사용할 수 없다.
이 때문에 Object.prototype 의 메서드들은 간접적으로 호출 (call, apply, bind) 하는 것이 좋다.

JavaScript 에서 객체의 프로퍼티를 순회할 때 for-in 문을 사용하는 경우가 있지만, 주의가 필요하다.
왜냐하면 해당 구문은 객체의 프로토타입 체인 상 존재하는 모든 프로퍼티 중 열거가능한(프로퍼티 속성자 enumerable 이 true) 모든 속성을 나열하기 때문이다.
그렇기에 상속받은 프로퍼티는 제외하려면 Object.prototype.hasOwnProperty 를 사용하거나 for-of, 혹은 Object entries/keys/values 등의 함수를 사용하는게 속 편하다.
