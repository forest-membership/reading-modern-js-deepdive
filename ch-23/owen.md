## 실행 컨텍스트

모든 소스코드는 `평가` 와 `실행` 두 과정으로 나뉘어서 처리된다.

평가 과정에서는 실행 컨텍스트를 생성하고 변수, 함수 등의 선언문을 실행해서 변수 및 함수 식별자를 실행 컨텍스트의 스코프로 등록한다.
평가 과정이 끝나면 선언문을 제외한 소스코드가 순차적으로 실행된다.

즉 코드를 실행하려면 스코프, 식별자, 코드 실행 순서 등의 관리가 필요한 것이다.
실행 컨텍스트는 소스코드를 실행하는데 필요한 환경을 제공하고 실행 결과를 매커니즘이다.
`식별자` 와 `스코프` 는 `렉시컬 환경`으로 관리하고 실행 순서는 `실행 컨텍스트 스택` 으로 관리한다.


### 렉시컬 환경
렉시컬 환경은 실행 컨텍스트를 구성하는 컴포넌트이다.
렉시컬 환경은 `환경 레코드` 와 `외부 렉시컬 환경 참조자` 로 구성되며 `환경 레코드` 는 스코프에 포함된 식별자를 등록하고 해당 식별자에 바인딩된 값을 관리한다. `외부 렉시컬 환경 참조자` 는 상위 스코프를 가리킨다.


### 실행 컨텍스트의 생성과 식별자 검색 과정

다음 코드를 보고 어떤 매커니즘으로 코드가 실행되는지 설명해보자.

```
var x = 1;
const y = 2;

function foo (a) {
	var x = 3;
	const y = 4;

	function bar (b) {
		const z = 5;
		console.log(a + b + x + y + z);
	}

	bar(10);
}

foo(20);
```

#### 전역 코드 평가 과정
1. 전역 실행 컨텍스트 생성
2. 전역 렉시컬 환경 생성
    1. 전역 환경 레코드 생성
        1. 객체 환경 레코드 생성
        2. 선언적 환경 레코드 생성
    2. this 바인딩
    3. 외부 렉시컬 환경 참조자 생성 (null)


#### 함수 코드 평가
1. 함수 실행 컨텍스트 생성
2. 함수 렉시컬 환경 생성
    1. 함수 환경 레코드 생성
    2. this 바인딩
    3. 외부 렉시컬 환경 참조자 생성
