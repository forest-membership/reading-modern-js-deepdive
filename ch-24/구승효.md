# 24. 클로저

클로저란, 함수와 그 함수가 선언된 렉시컬 환경과의 조합이다.

### 1. 렉시컬 스코프

렉시컬 스코프란, 함수를 어디에 정의했는지(위치)에 따라 상위 스코프를 결정한다.

(호출 시점이 중요한 것이 아니다.)

### 2. 내부 슬롯 [[Environment]]

함수는 자신의 내부슬롯에 정의된 환경, 상위 스코프의 참조를 저장해둔다.

### 3. 클로저와 렉시컬 환경

클로저란, 중첩함수인데 이미 생명 주기가 종료한 외부 함수의 변수를 참조할 수 있는 중첩 함수를 의미한다.

1. 외부 함수가 실행 종료 시 외부 함수의 생명 주기가 종료된다.
2. 외부 함수의 실행 컨텍스트는 실행 컨텍스트 스택에서 제거 된다.
3. 외부 함수의 렉시컬 환경이 소멸되지는 않는다.
4. 내부 중첩 함수(클로저)의 environement 내부 슬롯에 의해 참조되고 있기 때문이다.
5. 따라서, 외부 함수의 생존 여부와 관계 없이 상위 스코프를 기억하고 변경 또는 참조가 가능해진다.

클로저가 아닌 경우는 다음과 같은 경우를 포함한다.

- 상위 함수의 식별자를 참조하지 않는 경우
- 외부 함수보다 일찍 소멸되는 경우

따라서 클로저가 되려면 다음과 같아야 한다.

- 중첩 함수가 상위 스코프의 식별자를 참조한다.
- 중첩 함수가 외부 함수보다 더 오래 유지 된다.

### 4. 클로저의 활용

클로저를 활용하는 환경은 다음과 같다.

- 상태를 **안전**하게 변경하고 **유지**하기 위해 사용한다.
- 상태가 변경되지 않도록 안전하게 **은닉**하고 특정 함수에게만 상태 변경을 허용한다.

### 5. 캡슐화와 정보 은닉

캡슐화란, 객체의 상태를 나타내는 프로퍼티와 프로퍼티를 참조하고 조작할 수 있는 동작인 메서드를 하나로 묶는 것을 의미한다.

정보 은닉이란, 캡슐화를 객체의 특정 프로퍼티나 메서드를 감출 목적으로 사용할 때를 의미한다.
